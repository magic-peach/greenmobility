# NOTE: Only NEXT_PUBLIC_* keys are allowed to be public. Server-only secrets like GEMINI_API_KEY must NEVER be exposed.

[build]
  base = "unified-green-mobility"
  command = "cd client && npm install && npm run build"
  publish = "client/.next"

[build.environment]
  NODE_VERSION = "18.x"
  # Exclude .next cache from secrets scanning (build artifacts)
  SECRETS_SCAN_OMIT_PATHS = ".next/cache,.next/cache/**"
  # Exclude public keys from secrets scanning (these are intentionally public and embedded in client bundle)
  SECRETS_SCAN_OMIT_KEYS = "NEXT_PUBLIC_SUPABASE_URL,NEXT_PUBLIC_SUPABASE_ANON_KEY,NEXT_PUBLIC_MAPTILER_API_KEY,NEXT_PUBLIC_API_BASE_URL"
